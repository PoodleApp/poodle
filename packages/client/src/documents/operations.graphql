# TODO: use fragments after figuring out why fragments are not working

query getAllAccounts {
  accounts {
    id
    email
    loggedIn
  }
}

query getAccount($accountId: ID!) {
  account(id: $accountId) {
    id
    email
    loggedIn
    conversations(label: "\\Inbox") {
      id
      date
      from {
        host
        mailbox
        name
      }
      isRead
      isStarred
      labels
      snippet
      subject
    }
  }
}

mutation deleteAccount($id: ID!) {
  accounts {
    delete(id: $id)
  }
}

mutation addAccount($email: String!) {
  accounts {
    create(email: $email) {
      id
      email
      loggedIn
    }
  }
}

mutation authenticate($id: ID!) {
  accounts {
    authenticate(id: $id) {
      id
      email
      loggedIn
    }
  }
}

query getConversation($id: ID!, $accountId: ID!) {
  conversation(id: $id) {
    id
    presentableElements {
      id
      isRead
      isStarred
      contents {
        revision {
          messageId
          contentId
        }
        resource {
          messageId
          contentId
        }
        type
        subtype
        content
      }
      date
      from {
        name
        mailbox
        host
      }
      editedAt
      editedBy {
        name
        mailbox
        host
      }
    }
    isRead
    isStarred
    labels
    replyRecipients(fromAccountId: $accountId) {
      from {
        name
        mailbox
        host
      }
      to {
        name
        mailbox
        host
      }
      cc {
        name
        mailbox
        host
      }
    }
    snippet
    subject
  }
}

query searchConversations($query: String!, $specificityThreshold: Int) {
  conversations(query: $query, specificityThreshold: $specificityThreshold) {
    conversation {
      id
      messageId
      subject
    }
    query
  }
}

query getMatchingAddresses($inputValue: String!) {
  addresses(inputValue: $inputValue) {
    host
    mailbox
    name
  }
}

mutation sync($accountId: ID!) {
  accounts {
    sync(id: $accountId) {
      id
      email
      loggedIn
      conversations {
        id
        date
        from {
          host
          mailbox
          name
        }
        isRead
        labels
        snippet
        subject
      }
    }
  }
}

mutation setIsRead($conversationId: ID!, $isRead: Boolean!) {
  conversations {
    setIsRead(id: $conversationId, isRead: $isRead) {
      id
      date
      from {
        host
        mailbox
        name
      }
      isRead
      labels
      snippet
      subject
    }
  }
}

mutation archive($conversationId: ID!) {
  conversations {
    archive(id: $conversationId) {
      id
      date
      from {
        host
        mailbox
        name
      }
      isRead
      labels
      snippet
      subject
    }
  }
}

mutation flag($conversationIDs: [ID!]!, $isFlagged: Boolean!) {
  conversations {
    flag(ids: $conversationIDs, isFlagged: $isFlagged) {
      id
      date
      from {
        host
        mailbox
        name
      }
      isRead
      isStarred
      labels
      snippet
      subject
    }
  }
}

mutation flagPresentable(
  $presentableId: ID!
  $conversationId: ID!
  $isFlagged: Boolean!
) {
  presentableElements {
    flagPresentable(
      id: $presentableId
      conversationId: $conversationId
      isFlagged: $isFlagged
    ) {
      id
      date
      from {
        host
        mailbox
        name
      }
      isRead
      isStarred
    }
  }
}

mutation sendMessage($accountId: ID!, $message: MessageInput!) {
  conversations {
    sendMessage(accountId: $accountId, message: $message) {
      id
      presentableElements {
        id
        contents {
          revision {
            messageId
            contentId
          }
          resource {
            messageId
            contentId
          }
          type
          subtype
          content
        }
        date
        from {
          name
          mailbox
          host
        }
        editedAt
        editedBy {
          name
          mailbox
          host
        }
      }
      isRead
      labels
      snippet
      subject
    }
  }
}

mutation edit(
  $accountId: ID!
  $conversationId: ID!
  $resource: PartSpecInput!
  $revision: PartSpecInput!
  $content: ContentInput!
) {
  conversations {
    edit(
      accountId: $accountId
      conversationId: $conversationId
      resource: $resource
      revision: $revision
      content: $content
    ) {
      id
      presentableElements {
        id
        contents {
          revision {
            messageId
            contentId
          }
          resource {
            messageId
            contentId
          }
          type
          subtype
          content
        }
        date
        from {
          name
          mailbox
          host
        }
        editedAt
        editedBy {
          name
          mailbox
          host
        }
      }
      isRead
      labels
      snippet
      subject
    }
  }
}

mutation reply($accountId: ID!, $conversationId: ID!, $content: ContentInput!) {
  conversations {
    reply(accountId: $accountId, id: $conversationId, content: $content) {
      id
      presentableElements {
        id
        contents {
          revision {
            messageId
            contentId
          }
          resource {
            messageId
            contentId
          }
          type
          subtype
          content
        }
        date
        from {
          name
          mailbox
          host
        }
        editedAt
        editedBy {
          name
          mailbox
          host
        }
      }
      isRead
      labels
      snippet
      subject
    }
  }
}
