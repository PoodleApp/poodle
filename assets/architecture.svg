<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="1153pt" height="737pt"
 viewBox="0.00 0.00 1152.82 737.21" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 733.2052)">
<title>%3</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-733.2052 1148.8183,-733.2052 1148.8183,4 -4,4"/>
<!-- resolvers -->
<g id="node1" class="node">
<title>resolvers</title>
<ellipse fill="none" stroke="#000000" cx="684.5721" cy="-619.5778" rx="96.3333" ry="22.7556"/>
<text text-anchor="start" x="658.0721" y="-621.3778" font-family="Times,serif" font-size="14.00" fill="#000000">resolvers/</text>
<text text-anchor="start" x="624.5721" y="-610.5778" font-family="Times,serif" font-size="10.00" fill="#000000">respond to GraphQL requests</text>
</g>
<!-- cache -->
<g id="node4" class="node">
<title>cache</title>
<ellipse fill="none" stroke="#000000" cx="126.5721" cy="-250.7767" rx="126.6443" ry="29.8983"/>
<text text-anchor="start" x="109.0721" y="-257.5767" font-family="Times,serif" font-size="14.00" fill="#000000">cache/</text>
<text text-anchor="start" x="45.0721" y="-246.7767" font-family="Times,serif" font-size="10.00" fill="#000000">defines database queries and updates for</text>
<text text-anchor="start" x="74.5721" y="-236.7767" font-family="Times,serif" font-size="10.00" fill="#000000">~/.cache/poodle/db.sqlite</text>
</g>
<!-- resolvers&#45;&gt;cache -->
<g id="edge13" class="edge">
<title>resolvers&#45;&gt;cache</title>
<path fill="none" stroke="#000000" d="M598.3265,-609.5023C532.871,-600.4375 441.21,-584.6793 363.5721,-559.9504 271.1954,-530.5269 237.8775,-532.9955 165.5721,-468.4113 135.5576,-441.6019 129.6294,-429.7099 118.5721,-391.0143 107.3934,-351.8936 117.7943,-340.161 117.5721,-299.4752 117.5697,-299.0307 117.5307,-298.9177 117.5721,-298.4752 117.809,-295.9423 118.1151,-293.3435 118.4709,-290.7296"/>
<polygon fill="#000000" stroke="#000000" points="121.9553,-291.1019 120.0478,-280.6802 115.0399,-290.0167 121.9553,-291.1019"/>
</g>
<!-- compose -->
<g id="node6" class="node">
<title>compose</title>
<ellipse fill="none" stroke="#000000" cx="875.5721" cy="-438.7128" rx="118.5882" ry="29.8983"/>
<text text-anchor="start" x="849.0721" y="-445.5128" font-family="Times,serif" font-size="14.00" fill="#000000">compose/</text>
<text text-anchor="start" x="799.5721" y="-434.7128" font-family="Times,serif" font-size="10.00" fill="#000000">functions to compose email messages</text>
<text text-anchor="start" x="813.0721" y="-424.7128" font-family="Times,serif" font-size="10.00" fill="#000000">in a format for storage in cache</text>
</g>
<!-- resolvers&#45;&gt;compose -->
<g id="edge14" class="edge">
<title>resolvers&#45;&gt;compose</title>
<path fill="none" stroke="#000000" d="M718.8672,-598.2886C727.5383,-592.3912 736.6356,-585.7352 744.5721,-578.9504 781.9996,-546.9541 819.8736,-505.1614 845.2042,-475.5477"/>
<polygon fill="#000000" stroke="#000000" points="847.8799,-477.8041 851.6852,-467.9162 842.5443,-473.2729 847.8799,-477.8041"/>
</g>
<!-- models -->
<g id="node7" class="node">
<title>models</title>
<ellipse fill="none" stroke="#000000" cx="660.5721" cy="-140.2376" rx="132.8722" ry="36.5405"/>
<text text-anchor="start" x="638.5721" y="-152.0376" font-family="Times,serif" font-size="14.00" fill="#000000">models/</text>
<text text-anchor="start" x="616.5721" y="-141.2376" font-family="Times,serif" font-size="10.00" fill="#000000">general purpose logic</text>
<text text-anchor="start" x="574.5721" y="-131.2376" font-family="Times,serif" font-size="10.00" fill="#000000">for manipulating messages, conversations,</text>
<text text-anchor="start" x="631.5721" y="-121.2376" font-family="Times,serif" font-size="10.00" fill="#000000">addresses, etc.</text>
</g>
<!-- resolvers&#45;&gt;models -->
<g id="edge17" class="edge">
<title>resolvers&#45;&gt;models</title>
<path fill="none" stroke="#000000" d="M683.4307,-596.7807C679.7284,-522.8359 668.0004,-288.5993 662.9373,-187.4763"/>
<polygon fill="#000000" stroke="#000000" points="666.4212,-187.0658 662.4255,-177.2534 659.43,-187.4159 666.4212,-187.0658"/>
</g>
<!-- generated -->
<g id="node8" class="node">
<title>generated</title>
<ellipse fill="none" stroke="#000000" cx="846.5721" cy="-29.6985" rx="98.9899" ry="29.8983"/>
<text text-anchor="start" x="791.0721" y="-36.4985" font-family="Times,serif" font-size="14.00" fill="#000000">generated/graphql.ts</text>
<text text-anchor="start" x="784.5721" y="-25.6985" font-family="Times,serif" font-size="10.00" fill="#000000">provides TypeScript interfaces</text>
<text text-anchor="start" x="795.0721" y="-15.6985" font-family="Times,serif" font-size="10.00" fill="#000000">based on schema.graphql</text>
</g>
<!-- resolvers&#45;&gt;generated -->
<g id="edge15" class="edge">
<title>resolvers&#45;&gt;generated</title>
<path fill="none" stroke="#000000" d="M776.005,-612.2919C879.1114,-601.4927 1032.5721,-576.4688 1032.5721,-523.1808 1032.5721,-523.1808 1032.5721,-523.1808 1032.5721,-140.2376 1032.5721,-92.0921 985.9486,-64.4478 939.3869,-48.8447"/>
<polygon fill="#000000" stroke="#000000" points="940.3702,-45.4847 929.7797,-45.7885 938.2481,-52.1553 940.3702,-45.4847"/>
</g>
<!-- managers -->
<g id="node9" class="node">
<title>managers</title>
<ellipse fill="none" stroke="#000000" cx="827.5721" cy="-354.2447" rx="138.6859" ry="29.8983"/>
<text text-anchor="start" x="799.0721" y="-361.0447" font-family="Times,serif" font-size="14.00" fill="#000000">managers/</text>
<text text-anchor="start" x="737.5721" y="-350.2447" font-family="Times,serif" font-size="10.00" fill="#000000">provide one&#45;to&#45;one mappings from accounts</text>
<text text-anchor="start" x="769.5721" y="-340.2447" font-family="Times,serif" font-size="10.00" fill="#000000">to IMAP and SMTP sessions</text>
</g>
<!-- resolvers&#45;&gt;managers -->
<g id="edge16" class="edge">
<title>resolvers&#45;&gt;managers</title>
<path fill="none" stroke="#000000" d="M686.4171,-596.8086C690.7541,-555.6558 704.7125,-467.7241 747.5721,-409.0143 753.1112,-401.4267 760.0377,-394.5443 767.4832,-388.4202"/>
<polygon fill="#000000" stroke="#000000" points="769.9363,-390.9487 775.725,-382.0751 765.666,-385.4021 769.9363,-390.9487"/>
</g>
<!-- queue -->
<g id="node12" class="node">
<title>queue</title>
<ellipse fill="none" stroke="#000000" cx="508.5721" cy="-523.1808" rx="136.4432" ry="36.5405"/>
<text text-anchor="start" x="490.0721" y="-534.9808" font-family="Times,serif" font-size="14.00" fill="#000000">queue/</text>
<text text-anchor="start" x="420.0721" y="-524.1808" font-family="Times,serif" font-size="10.00" fill="#000000">stores pending IMAP and SMTP operations</text>
<text text-anchor="start" x="451.0721" y="-514.1808" font-family="Times,serif" font-size="10.00" fill="#000000">in a sqlite&#45;backed job queue</text>
<text text-anchor="start" x="425.0721" y="-504.1808" font-family="Times,serif" font-size="10.00" fill="#000000">updates cache to reflect pending changes</text>
</g>
<!-- resolvers&#45;&gt;queue -->
<g id="edge18" class="edge">
<title>resolvers&#45;&gt;queue</title>
<path fill="none" stroke="#000000" d="M646.3827,-598.6611C626.3018,-587.6626 601.0612,-573.838 577.6862,-561.0353"/>
<polygon fill="#000000" stroke="#000000" points="579.2855,-557.9207 568.8336,-556.1866 575.9229,-564.0601 579.2855,-557.9207"/>
</g>
<!-- schema -->
<g id="node2" class="node">
<title>schema</title>
<ellipse fill="none" stroke="#000000" cx="1070.5721" cy="-619.5778" rx="74.4932" ry="22.7556"/>
<text text-anchor="start" x="1027.0721" y="-621.3778" font-family="Times,serif" font-size="14.00" fill="#000000">schema.graphql</text>
<text text-anchor="start" x="1026.0721" y="-610.5778" font-family="Times,serif" font-size="10.00" fill="#000000">defines GraphQL API</text>
</g>
<!-- schema&#45;&gt;generated -->
<g id="edge22" class="edge">
<title>schema&#45;&gt;generated</title>
<path fill="none" stroke="#000000" d="M1070.5721,-596.5949C1070.5721,-577.0648 1070.5721,-548.2842 1070.5721,-523.1808 1070.5721,-523.1808 1070.5721,-523.1808 1070.5721,-140.2376 1070.5721,-118.0243 1062.307,-112.0764 1046.5721,-96.397 1019.9698,-69.8884 982.5643,-53.9146 947.2887,-44.2893"/>
<polygon fill="#000000" stroke="#000000" points="947.9637,-40.8489 937.4063,-41.7393 946.2147,-47.6269 947.9637,-40.8489"/>
</g>
<!-- account -->
<g id="node3" class="node">
<title>account</title>
<ellipse fill="none" stroke="#000000" cx="795.5721" cy="-250.7767" rx="84.7059" ry="29.8983"/>
<text text-anchor="start" x="772.5721" y="-257.5767" font-family="Times,serif" font-size="14.00" fill="#000000">account/</text>
<text text-anchor="start" x="743.5721" y="-246.7767" font-family="Times,serif" font-size="10.00" fill="#000000">handles IMAP and SMTP</text>
<text text-anchor="start" x="757.5721" y="-236.7767" font-family="Times,serif" font-size="10.00" fill="#000000">connection details</text>
</g>
<!-- db -->
<g id="node5" class="node">
<title>db</title>
<ellipse fill="none" stroke="#000000" cx="126.5721" cy="-140.2376" rx="91.8478" ry="43.6818"/>
<text text-anchor="start" x="113.0721" y="-157.0376" font-family="Times,serif" font-size="14.00" fill="#000000">db.ts</text>
<text text-anchor="start" x="69.5721" y="-146.2376" font-family="Times,serif" font-size="10.00" fill="#000000">provides shared reference to</text>
<text text-anchor="start" x="74.5721" y="-136.2376" font-family="Times,serif" font-size="10.00" fill="#000000">~/.cache/poodle/db.sqlite</text>
<text text-anchor="start" x="72.5721" y="-126.2376" font-family="Times,serif" font-size="10.00" fill="#000000">(or an in&#45;memory database</text>
<text text-anchor="start" x="110.5721" y="-116.2376" font-family="Times,serif" font-size="10.00" fill="#000000">in tests)</text>
</g>
<!-- cache&#45;&gt;db -->
<g id="edge1" class="edge">
<title>cache&#45;&gt;db</title>
<path fill="none" stroke="#000000" d="M126.5721,-220.8632C126.5721,-212.6871 126.5721,-203.5657 126.5721,-194.4813"/>
<polygon fill="#000000" stroke="#000000" points="130.0722,-194.2928 126.5721,-184.2928 123.0722,-194.2929 130.0722,-194.2928"/>
</g>
<!-- compose&#45;&gt;models -->
<g id="edge2" class="edge">
<title>compose&#45;&gt;models</title>
<path fill="none" stroke="#000000" d="M949.8532,-415.4287C960.0617,-409.0985 969.2084,-401.1002 975.5721,-391.0143 993.0127,-363.3724 987.2151,-348.0151 975.5721,-317.4752 955.1193,-263.8268 937.2534,-253.0621 889.5721,-221.0782 867.5744,-206.3225 812.0021,-186.5763 761.1133,-170.2935"/>
<polygon fill="#000000" stroke="#000000" points="761.9331,-166.8816 751.3427,-167.1906 759.8143,-173.5533 761.9331,-166.8816"/>
</g>
<!-- models&#45;&gt;generated -->
<g id="edge6" class="edge">
<title>models&#45;&gt;generated</title>
<path fill="none" stroke="#000000" d="M711.6083,-106.1702C735.3759,-91.6504 763.7314,-74.8295 788.3298,-60.6668"/>
<polygon fill="#000000" stroke="#000000" points="790.2717,-63.588 797.207,-55.5785 786.7906,-57.5149 790.2717,-63.588"/>
</g>
<!-- generated&#45;&gt;models -->
<g id="edge3" class="edge">
<title>generated&#45;&gt;models</title>
<path fill="none" stroke="#000000" d="M806.6622,-56.9289C784.5391,-70.6101 756.4499,-87.4095 730.8028,-102.3299"/>
<polygon fill="#000000" stroke="#000000" points="728.7434,-99.4781 721.8468,-107.5209 732.2537,-105.5343 728.7434,-99.4781"/>
</g>
<!-- managers&#45;&gt;account -->
<g id="edge4" class="edge">
<title>managers&#45;&gt;account</title>
<path fill="none" stroke="#000000" d="M818.4022,-324.5949C815.0882,-313.8797 811.293,-301.6083 807.7609,-290.1876"/>
<polygon fill="#000000" stroke="#000000" points="811.0418,-288.9502 804.7434,-280.4308 804.3544,-291.0185 811.0418,-288.9502"/>
</g>
<!-- oauth -->
<g id="node10" class="node">
<title>oauth</title>
<ellipse fill="none" stroke="#000000" cx="908.5721" cy="-140.2376" rx="84.7059" ry="29.8983"/>
<text text-anchor="start" x="891.5721" y="-147.0376" font-family="Times,serif" font-size="14.00" fill="#000000">oauth/</text>
<text text-anchor="start" x="856.5721" y="-136.2376" font-family="Times,serif" font-size="10.00" fill="#000000">handles IMAP and SMTP</text>
<text text-anchor="start" x="864.0721" y="-126.2376" font-family="Times,serif" font-size="10.00" fill="#000000">authentication details</text>
</g>
<!-- managers&#45;&gt;oauth -->
<g id="edge5" class="edge">
<title>managers&#45;&gt;oauth</title>
<path fill="none" stroke="#000000" d="M858.7677,-324.9992C870.3051,-312.4164 882.3253,-296.8436 889.5721,-280.4752 903.6572,-248.6614 907.9734,-209.1329 909.0184,-180.1594"/>
<polygon fill="#000000" stroke="#000000" points="912.5213,-180.0791 909.2674,-169.9963 905.5234,-179.9075 912.5213,-180.0791"/>
</g>
<!-- pubsub -->
<g id="node11" class="node">
<title>pubsub</title>
<ellipse fill="none" stroke="#000000" cx="342.5721" cy="-140.2376" rx="96.7474" ry="29.8983"/>
<text text-anchor="start" x="316.5721" y="-147.0376" font-family="Times,serif" font-size="14.00" fill="#000000">pubsub.ts</text>
<text text-anchor="start" x="294.0721" y="-136.2376" font-family="Times,serif" font-size="10.00" fill="#000000">notifies client to refresh</text>
<text text-anchor="start" x="282.0721" y="-126.2376" font-family="Times,serif" font-size="10.00" fill="#000000">when cache has been updated</text>
</g>
<!-- queue&#45;&gt;cache -->
<g id="edge7" class="edge">
<title>queue&#45;&gt;cache</title>
<path fill="none" stroke="#000000" d="M405.8837,-498.711C310.5249,-473.8024 178.46,-432.9823 145.5721,-391.0143 123.5432,-362.9033 120.4051,-321.5012 121.8074,-290.9652"/>
<polygon fill="#000000" stroke="#000000" points="125.3212,-290.8608 122.4692,-280.6571 118.3356,-290.4123 125.3212,-290.8608"/>
</g>
<!-- queue&#45;&gt;models -->
<g id="edge9" class="edge">
<title>queue&#45;&gt;models</title>
<path fill="none" stroke="#000000" d="M557.6168,-488.6429C564.0068,-482.4896 569.9321,-475.695 574.5721,-468.4113 589.7575,-444.5737 630.5195,-271.9864 649.9666,-187.1139"/>
<polygon fill="#000000" stroke="#000000" points="653.4131,-187.7428 652.2294,-177.2143 646.5891,-186.183 653.4131,-187.7428"/>
</g>
<!-- queue&#45;&gt;managers -->
<g id="edge8" class="edge">
<title>queue&#45;&gt;managers</title>
<path fill="none" stroke="#000000" d="M585.1666,-492.6361C601.4566,-485.3108 618.3311,-477.0781 633.5721,-468.4113 673.0042,-445.9882 677.6593,-432.3267 716.5721,-409.0143 730.0304,-400.9515 744.8403,-393.033 759.1362,-385.8323"/>
<polygon fill="#000000" stroke="#000000" points="761.0398,-388.7947 768.437,-381.2098 757.9243,-382.5262 761.0398,-388.7947"/>
</g>
<!-- request -->
<g id="node13" class="node">
<title>request</title>
<ellipse fill="none" stroke="#000000" cx="432.5721" cy="-250.7767" rx="87.8629" ry="22.7556"/>
<text text-anchor="start" x="411.0721" y="-252.5767" font-family="Times,serif" font-size="14.00" fill="#000000">request/</text>
<text text-anchor="start" x="378.5721" y="-241.7767" font-family="Times,serif" font-size="10.00" fill="#000000">abstracts IMAP operations</text>
</g>
<!-- queue&#45;&gt;request -->
<g id="edge10" class="edge">
<title>queue&#45;&gt;request</title>
<path fill="none" stroke="#000000" d="M534.9973,-486.9036C562.879,-443.7765 598.5636,-370.9277 565.5721,-317.4752 551.978,-295.45 528.6503,-280.4483 505.2911,-270.3462"/>
<polygon fill="#000000" stroke="#000000" points="506.5919,-267.0969 496.0098,-266.5773 503.9582,-273.5826 506.5919,-267.0969"/>
</g>
<!-- serialize -->
<g id="node14" class="node">
<title>serialize</title>
<ellipse fill="none" stroke="#000000" cx="466.5721" cy="-354.2447" rx="89.6056" ry="29.8983"/>
<text text-anchor="start" x="411.0721" y="-361.0447" font-family="Times,serif" font-size="14.00" fill="#000000">compose/serialize.ts</text>
<text text-anchor="start" x="429.5721" y="-350.2447" font-family="Times,serif" font-size="10.00" fill="#000000">prepares messages</text>
<text text-anchor="start" x="425.5721" y="-340.2447" font-family="Times,serif" font-size="10.00" fill="#000000">to be sent via SMTP</text>
</g>
<!-- queue&#45;&gt;serialize -->
<g id="edge11" class="edge">
<title>queue&#45;&gt;serialize</title>
<path fill="none" stroke="#000000" d="M499.355,-486.1071C492.5591,-458.7718 483.329,-421.6457 476.3941,-393.7518"/>
<polygon fill="#000000" stroke="#000000" points="479.7612,-392.7881 473.9518,-383.928 472.968,-394.4771 479.7612,-392.7881"/>
</g>
<!-- sync -->
<g id="node15" class="node">
<title>sync</title>
<ellipse fill="none" stroke="#000000" cx="256.5721" cy="-354.2447" rx="101.6471" ry="36.5405"/>
<text text-anchor="start" x="237.5721" y="-366.0447" font-family="Times,serif" font-size="14.00" fill="#000000">sync.ts</text>
<text text-anchor="start" x="192.5721" y="-355.2447" font-family="Times,serif" font-size="10.00" fill="#000000">synchronizes IMAP server state</text>
<text text-anchor="start" x="228.0721" y="-345.2447" font-family="Times,serif" font-size="10.00" fill="#000000">to local cache</text>
<text text-anchor="start" x="210.0721" y="-335.2447" font-family="Times,serif" font-size="10.00" fill="#000000">(scheduled via queue/)</text>
</g>
<!-- queue&#45;&gt;sync -->
<g id="edge12" class="edge">
<title>queue&#45;&gt;sync</title>
<path fill="none" stroke="#000000" d="M457.5762,-488.9941C415.7789,-460.974 356.6685,-421.3475 313.367,-392.3189"/>
<polygon fill="#000000" stroke="#000000" points="315.1824,-389.3223 304.9273,-386.6611 311.2846,-395.1367 315.1824,-389.3223"/>
</g>
<!-- request&#45;&gt;models -->
<!-- request&#45;&gt;pubsub -->
<!-- sync&#45;&gt;cache -->
<g id="edge23" class="edge">
<title>sync&#45;&gt;cache</title>
<path fill="none" stroke="#000000" d="M214.3648,-320.6516C200.3584,-309.5038 184.7352,-297.0691 170.5954,-285.8151"/>
<polygon fill="#000000" stroke="#000000" points="172.4688,-282.833 162.4649,-279.344 168.1096,-288.31 172.4688,-282.833"/>
</g>
<!-- sync&#45;&gt;models -->
<g id="edge24" class="edge">
<title>sync&#45;&gt;models</title>
<path fill="none" stroke="#000000" d="M330.3078,-328.7308C342.6876,-324.7608 355.4492,-320.8592 367.5721,-317.4752 438.7067,-297.6186 465.5534,-317.2994 529.5721,-280.4752 540.9436,-273.9342 587.9081,-222.3599 622.3652,-183.6402"/>
<polygon fill="#000000" stroke="#000000" points="625.0519,-185.8858 629.0756,-176.0848 619.8181,-181.2374 625.0519,-185.8858"/>
</g>
<!-- sync&#45;&gt;pubsub -->
<g id="edge25" class="edge">
<title>sync&#45;&gt;pubsub</title>
<path fill="none" stroke="#000000" d="M271.356,-317.4556C286.8073,-279.0059 310.9609,-218.9006 326.7788,-179.5386"/>
<polygon fill="#000000" stroke="#000000" points="330.1291,-180.5879 330.6103,-170.004 323.6339,-177.9778 330.1291,-180.5879"/>
</g>
<!-- sync&#45;&gt;request -->
<g id="edge26" class="edge">
<title>sync&#45;&gt;request</title>
<path fill="none" stroke="#000000" d="M310.3342,-322.6387C335.3435,-307.9361 364.7237,-290.6639 388.4117,-276.738"/>
<polygon fill="#000000" stroke="#000000" points="390.3439,-279.6622 397.1907,-271.5769 386.7963,-273.6277 390.3439,-279.6622"/>
</g>
<!-- client -->
<!-- client&#45;&gt;resolvers -->
<g id="edge21" class="edge">
<title>client&#45;&gt;resolvers</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M684.5721,-693.1026C684.5721,-681.5487 684.5721,-666.2285 684.5721,-652.5641"/>
<polygon fill="#000000" stroke="#000000" points="688.0722,-652.5274 684.5721,-642.5274 681.0722,-652.5275 688.0722,-652.5274"/>
<text text-anchor="middle" x="734.5721" y="-664.0052" font-family="Times,serif" font-size="14.00" fill="#000000">GraphQL requests</text>
</g>
</g>
</svg>
